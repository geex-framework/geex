# 获取book列表
query books($input: QueryBookInput!, $skip: Int, $take: Int, $where: BookFilterInput, $order: [BookSortInput!] = [{ publicationDate: DESC }]) {
  books(input: $input, skip: $skip, take: $take, where: $where, order: $order) {
    items {
      ...BookBrief
    }
    pageInfo {
      ...PageInfo
    }
    totalCount
  }
}

# 获取全量的book （用于数据导出等场景）
# query books($where: IBookFilterInput) {
#   books(skip: 0, take: 999, where: $where, order: { createdOn: DESC }) {
#     items {
#       ...BookBrief
#     }
#   }
# }
# book详情
query bookById($id: String!) {
  bookById(id: $id) {
    ...BookDetail
  }
}
# 新增book
mutation createBooks($input: CreateBookInput!) {
  createBook(input: $input) {
    id
  }
}
# 删除book
mutation deleteBooks($ids: [String!]!) {
  deleteBook(ids: $ids)
}
# 编辑book
mutation editBooks($id: String!,$input: EditBookInput!) {
  editBook(id: $id, input: $input)
}
# 审核book
mutation auditBook($ids: [String]) {
  auditBook(ids: $ids)
}
# 取消审核book
mutation unauditBook($ids: [String]) {
  unauditBook(ids: $ids)
}
# 提交book
mutation submitBooks($ids: [String]) {
  submitBook(ids: $ids)
}
# 取消提交book
mutation unsubmitBooks($ids: [String]) {
  unsubmitBook(ids: $ids)
}

fragment BookBrief on Book {
  id
  name
  author
  cover
  press
  publicationDate
  isbn
  bookStatus
  bookCategoryId
  createdOn
  modifiedOn
  attachments {
    url
  }
  bookCategory {
    name
  }
}
fragment BookDetail on Book {
  id
  name
  author
  cover
  press
  publicationDate
  isbn
  bookStatus
  bookCategoryId
  bookCategory {
    name
    describe
  }
  createdOn
  modifiedOn
  borrowRecords {
    readersDate
    returnDate
    reader {
      name
    }
  }
  # other fields
}
