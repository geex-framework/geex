directive @audit on FIELD_DEFINITION

directive @validate(ruleKey: String) repeatable on ARGUMENT_DEFINITION | INPUT_FIELD_DEFINITION

directive @noLog on FIELD_DEFINITION

directive @last(count: Int = 1) on FIELD

directive @first(count: Int = 1) on FIELD

directive @nullBubbling(enable: Boolean! = true) on QUERY | MUTATION | SUBSCRIPTION

"""
The @tag directive is used to apply arbitrary string
metadata to a schema location. Custom tooling can use
this metadata during any step of the schema delivery flow,
including composition, static analysis, and documentation.

interface Book {
  id: ID! @tag(name: "your-value")
  title: String!
  author: String!
}
"""
directive @tag(name: String!) repeatable on SCHEMA | SCALAR | OBJECT | FIELD_DEFINITION | ARGUMENT_DEFINITION | INTERFACE | UNION | ENUM | ENUM_VALUE | INPUT_OBJECT | INPUT_FIELD_DEFINITION

type Query {
  _: String

  """列表获取BlobObject"""
  blobObjects(filter: IBlobObjectFilterInput, skip: Int, take: Int): BlobObjectsCollectionSegment
  currentUser: IUser

  """获取初始化应用所需的settings"""
  initSettings: [ISetting!]!

  """Query job states with filtering and pagination"""
  jobState(filter: JobStateFilterInput, request: QueryJobStatesRequest, skip: Int, sort: [JobStateSortInput!], take: Int): JobStateCollectionSegment

  """列表获取message"""
  messages(filter: IMessageFilterInput, skip: Int, take: Int): MessagesCollectionSegment
  myPermissions: [String!]!
  orgs(filter: IOrgFilterInput, skip: Int, take: Int): OrgsCollectionSegment
  roles(filter: IRoleFilterInput, skip: Int, take: Int): RolesCollectionSegment

  """根据provider获取全量设置"""
  settings(filter: ISettingFilterInput, request: GetSettingsRequest!, skip: Int, take: Int): SettingsCollectionSegment

  """列表获取message"""
  unreadMessages: [IMessage!]!

  """列表获取User"""
  users(filter: IUserFilterInput, skip: Int, sort: [IUserSortInput!], take: Int): UsersCollectionSegment
}

type Mutation {
  _: String
  assignOrgs(request: AssignOrgRequest!): Boolean!
  assignRoles(request: AssignRoleRequest!): Boolean!
  authenticate(request: AuthenticateRequest!): UserToken!
  authorize(request: AuthorizeRequest!): Boolean!
  cancelAuthentication: Boolean!

  """更新设置"""
  changePassword(request: ChangePasswordRequest!): Boolean!

  """创建BlobObject"""
  createBlobObject(request: CreateBlobObjectRequest!): IBlobObject!

  """创建消息"""
  createMessage(request: CreateMessageRequest!): IMessage!
  createOrg(request: CreateOrgRequest!): IOrg!
  createRole(request: CreateRoleRequest!): IRole!
  createUser(request: CreateUserRequest!): IUser!

  """删除BlobObject"""
  deleteBlobObject(request: DeleteBlobObjectRequest!): Boolean!

  """删除消息分配"""
  deleteMessageDistributions(request: DeleteMessageDistributionsRequest!): Boolean!
  deleteOrg(id: String!): Boolean!
  deleteUser(request: DeleteUserRequest!): Boolean!

  """编辑消息"""
  editMessage(request: EditMessageRequest!): Boolean!

  """更新设置"""
  editSetting(request: EditSettingRequest!): ISetting!
  editUser(request: EditUserRequest!): IUser!
  federateAuthenticate(request: FederateAuthenticateRequest!): UserToken!
  fixUserOrg: Boolean!
  generateCaptcha(request: SendCaptchaRequest!): Captcha!

  """标记消息已读"""
  markMessagesRead(request: MarkMessagesReadRequest!): Boolean!
  register(request: RegisterUserRequest!): Boolean!
  resetUserPassword(request: ResetUserPasswordRequest!): IUser!

  """发送消息"""
  sendMessage(request: SendNotificationMessageRequest!): Boolean!
  setRoleDefault(request: SetRoleDefaultRequest!): Boolean!
  validateCaptcha(request: ValidateCaptchaRequest!): Boolean!
}

type Subscription {
  _: String

  """测试"""
  echo(text: String!): String!

  """订阅服务器对单个用户的前端调用"""
  onPrivateNotify: ClientNotify!

  """订阅广播"""
  onPublicNotify: ClientNotify!
}

"""The contract for Entity classes"""
interface IEntityBase {
  createdOn: DateTime!

  """
  The Id property for this entity type.
  注意: dbcontext会根据entity是否有id值来判断当前entity是否为新增
  """
  id: String!
}

interface IPagedList {
  pageIndex: Int!
  pageSize: Int!
  totalCount: Int!
  totalPage: Int!
}

"""The `Upload` scalar type represents a file upload."""
scalar Upload

"""Represents a blob object in the storage system"""
type BlobObject implements IBlobObject & IEntityBase {
  createdOn: DateTime!
  expireAt: DateTime
  fileName: String
  fileSize: Long!
  id: String!
  md5: String
  mimeType: String
  modifiedOn: DateTime!
  storageType: BlobStorageType!
  url: String
}

type NewMessageClientNotify implements ClientNotify {
  createdOn: DateTime!
  message: Message!
}

type Org implements IEntityBase & IOrg {
  """所有父组织编码"""
  allParentOrgCodes: [String!]!

  """所有父组织"""
  allParentOrgs: [IOrg!]!

  """所有子组织编码"""
  allSubOrgCodes: [String!]!

  """所有子组织"""
  allSubOrgs: [IOrg!]!

  """编码"""
  code: String!
  createdOn: DateTime!

  """直系子组织编码"""
  directSubOrgCodes: [String!]!

  """直系子组织"""
  directSubOrgs: [IOrg!]!
  id: String!
  modifiedOn: DateTime!
  name: String!

  """组织类型"""
  orgType: OrgTypeEnum!

  """父组织"""
  parentOrg: IOrg!

  """父组织编码"""
  parentOrgCode: String!

  """租户编码, 为null时为宿主数据"""
  tenantCode: String
}

"""role为了方便和string的相互转化, 采用class的形式"""
type Role implements IEntityBase & IRole {
  code: String!
  createdOn: DateTime!
  id: String!
  isDefault: Boolean!
  isEnabled: Boolean!
  isStatic: Boolean!
  modifiedOn: DateTime!
  name: String!
  permissions: [String!]!
  tenantCode: String
  users: [IUser!]!
}

type Captcha {
  bitmap: String
  captchaType: CaptchaType!
  key: String!
}

type Setting implements ISetting & IEntityBase {
  createdOn: DateTime!
  id: String!
  modifiedOn: DateTime!
  name: SettingDefinition!
  scope: SettingScopeEnumeration!
  scopedKey: String
  validScopes: [SettingScopeEnumeration!]!
  value: Any
}

"""mime type, e.g. application/json"""
scalar MimeType

type User implements IUser & IEntityBase & IAuthUser {
  avatarFile: IBlobObject
  avatarFileId: String
  claims(filter: UserClaimFilterInput): [UserClaim!]!
  createdOn: DateTime!
  email: String
  id: String!
  isEnable: Boolean!
  loginProvider: LoginProviderEnum!
  modifiedOn: DateTime!
  nickname: String
  openId: String
  orgCodes: [String!]!
  orgs: [IOrg!]!
  permissions: [String!]!
  phoneNumber: String
  roleIds: [String!]!
  roleNames: [String!]!
  roles: [IRole!]!
  tenantCode: String
  username: String!
}

"""^[1]([3-9])[0-9]{9}$"""
scalar ChinesePhoneNumber

type JobExecutionHistory implements IEntityBase {
  createdOn: DateTime!
  executionEndTime: DateTime
  executionStartTime: DateTime!
  id: String!
  isSuccess: Boolean!
  jobName: String!
  message: String!
  modifiedOn: DateTime!
}

type DataChangeClientNotify implements ClientNotify {
  createdOn: DateTime!
  dataChangeType: DataChangeType!
}

type IMessageContent {
  _: String!
}

scalar Any

type AuditLog implements IEntityBase {
  clientIp: String
  createdOn: DateTime!
  id: String!
  isSuccess: Boolean!
  modifiedOn: DateTime!
  operation: String
  operationName: String!
  operationType: OperationType!
  operatorId: String
  result: Any

  """租户编码, 为null时为宿主数据"""
  tenantCode: String
  variables: Any
}

"""普通message"""
type Message implements IMessage & IEntityBase {
  content: IMessageContent!
  createdOn: DateTime!
  distributions: [MessageDistribution!]!
  fromUserId: String
  id: String!
  messageType: MessageType!
  modifiedOn: DateTime!
  severity: MessageSeverityType!
  tenantCode: String
  time: DateTime!
  title: String!
  toUserIds: [String!]!
}

interface ClientNotify {
  createdOn: DateTime!
}

type UserToken {
  loginProvider: LoginProviderEnum
  name: String!
  token: String
  user: IAuthUser!
  userId: String!
}

scalar ObjectId

type JobState implements IEntityBase {
  createdOn: DateTime!
  cron: String!
  executionHistories(filter: JobExecutionHistoryFilterInput, skip: Int, take: Int): ExecutionHistoriesCollectionSegment
  id: String!
  jobName: String!
  lastExecutionTime: DateTime
  modifiedOn: DateTime!
  nextExecutionTime: DateTime
}

enum AuthorizationPermission {
  authorization_mutation_authorize
}

"""inherit this enumeration to customise your own business exceptions"""
enum GeexExceptionType {
  ValidationFailed
  ExternalError
  Unknown
  OnPurpose
  NotFound
  Conflict
}

enum AppPermission {
  identity_mutation_createRole
  settings_mutation_editSetting
  identity_query_roles
  authorization_mutation_authorize
  identity_mutation_editUser
  identity_query_users
  identity_mutation_createUser
  identity_mutation_editRole
  identity_mutation_editOrg
  identity_mutation_createOrg
}

enum LocalizationSettings {
  LocalizationData
  LocalizationLanguage
}

enum SettingsPermission {
  settings_mutation_editSetting
}

enum CaptchaProvider {
  Image
  Sms
}

enum IdentityPermission {
  identity_mutation_createRole
  identity_query_roles
  identity_mutation_editUser
  identity_query_users
  identity_mutation_createUser
  identity_mutation_editRole
  identity_mutation_editOrg
  identity_mutation_createOrg
}

enum LoginProviderEnum {
  Geex
  Local
}

enum AppSettings {
  AppPermissions
  AppAppMenu
  AppAppName
}

enum RolePermission {
  identity_mutation_createRole
  identity_query_roles
  identity_mutation_editRole
}

enum SettingDefinition {
  AppPermissions
  AppAppMenu
  LocalizationData
  BlobStorageModuleName
  AppAppName
  LocalizationLanguage
  MessagingModuleName
}

enum DataChangeType {
  Org
  Tenant
  Role
  User
}

enum BlobStorageType {
  FileSystem
  Cache
  Db
}

enum SettingScopeEnumeration {
  Tenant
  User
  Global
}

enum OperationType {
  Query
  Subscription
  Mutation
}

enum UserPermission {
  identity_mutation_editUser
  identity_query_users
  identity_mutation_createUser
}

enum MessagingSettings {
  MessagingModuleName
}

enum AuthorizeTargetType {
  Role
  User
}

enum GeexClaimType {
  Provider
  Org
  ClientId
  Tenant
  Sub
  Role
  FullName
  Expires
  Nickname
}

enum OrgPermission {
  identity_mutation_editOrg
  identity_mutation_createOrg
}

enum GeexLoginProviders {
  Geex
}

enum OrgTypeEnum {
  Default
}

enum BlobStorageSettings {
  BlobStorageModuleName
}

enum ApplyPolicy {
  BEFORE_RESOLVER
  AFTER_RESOLVER
  VALIDATION
}

"""Represents a blob object in the storage system"""
input IBlobObjectFilterInput {
  and: [IBlobObjectFilterInput!]
  or: [IBlobObjectFilterInput!]

  """
  The Id property for this entity type.
  注意: dbcontext会根据entity是否有id值来判断当前entity是否为新增
  """
  id: StringOperationFilterInput

  """MD5 hash of the file content"""
  md5: StringOperationFilterInput

  """MIME type of the file"""
  mimeType: StringOperationFilterInput

  """Storage type used for this blob"""
  storageType: ClassEnumOperationFilterInputTypeOfBlobStorageTypeFilterInput

  """Size of the file in bytes"""
  fileSize: LongOperationFilterInput

  """Name of the file"""
  fileName: StringOperationFilterInput
}

"""A segment of a collection."""
type BlobObjectsCollectionSegment {
  """A flattened list of the items."""
  items: [IBlobObject]

  """Information to aid in pagination."""
  pageInfo: CollectionSegmentInfo!
  totalCount: Int!
}

input ISettingFilterInput {
  and: [ISettingFilterInput!]
  or: [ISettingFilterInput!]

  """
  The Id property for this entity type.
  注意: dbcontext会根据entity是否有id值来判断当前entity是否为新增
  """
  id: StringOperationFilterInput
  name: SettingDefinitionOperationFilterInput
  scope: SettingScopeEnumerationOperationFilterInput
  scopedKey: StringOperationFilterInput
}

"""A segment of a collection."""
type SettingsCollectionSegment {
  """A flattened list of the items."""
  items: [Setting]

  """Information to aid in pagination."""
  pageInfo: CollectionSegmentInfo!
  totalCount: Int!
}

input IOrgFilterInput {
  and: [IOrgFilterInput!]
  or: [IOrgFilterInput!]
  name: StringOperationFilterInput

  """以.作为分割线的编码"""
  code: StringOperationFilterInput

  """父组织编码"""
  parentOrgCode: StringOperationFilterInput

  """组织类型"""
  orgType: ClassEnumOperationFilterInputTypeOfOrgTypeEnumFilterInput
}

"""A segment of a collection."""
type OrgsCollectionSegment {
  """A flattened list of the items."""
  items: [IOrg]

  """Information to aid in pagination."""
  pageInfo: CollectionSegmentInfo!
  totalCount: Int!
}

input IRoleFilterInput {
  and: [IRoleFilterInput!]
  or: [IRoleFilterInput!]
  name: StringOperationFilterInput

  """
  The Id property for this entity type.
  注意: dbcontext会根据entity是否有id值来判断当前entity是否为新增
  """
  id: StringOperationFilterInput
  users: ListFilterInputTypeOfIUserFilterInput
}

"""A segment of a collection."""
type RolesCollectionSegment {
  """A flattened list of the items."""
  items: [IRole]

  """Information to aid in pagination."""
  pageInfo: CollectionSegmentInfo!
  totalCount: Int!
}

input IUserFilterInput {
  and: [IUserFilterInput!]
  or: [IUserFilterInput!]
  username: StringOperationFilterInput
  nickname: StringOperationFilterInput
  isEnable: BooleanOperationFilterInput
  phoneNumber: StringOperationFilterInput
  createdOn: DateTimeOperationFilterInput
  orgCodes: ListStringOperationFilterInput
  roleIds: ListStringOperationFilterInput

  """
  The Id property for this entity type.
  注意: dbcontext会根据entity是否有id值来判断当前entity是否为新增
  """
  id: StringOperationFilterInput
}

input IUserSortInput {
  """
  The Id property for this entity type.
  注意: dbcontext会根据entity是否有id值来判断当前entity是否为新增
  """
  id: SortEnumType
  createdOn: SortEnumType
}

"""A segment of a collection."""
type UsersCollectionSegment {
  """A flattened list of the items."""
  items: [IUser]

  """Information to aid in pagination."""
  pageInfo: CollectionSegmentInfo!
  totalCount: Int!
}

"""
this is a aggregate root of this module, we name it the same as the module feel free to change it to its real name
"""
input IMessageFilterInput {
  and: [IMessageFilterInput!]
  or: [IMessageFilterInput!]
  messageType: MessageTypeOperationFilterInput

  """
  The Id property for this entity type.
  注意: dbcontext会根据entity是否有id值来判断当前entity是否为新增
  """
  id: StringOperationFilterInput
  fromUserId: StringOperationFilterInput
  content: IMessageContentFilterInput
  toUserIds: ListStringOperationFilterInput
  severity: MessageSeverityTypeOperationFilterInput
  title: StringOperationFilterInput
  time: DateTimeOperationFilterInput
}

"""A segment of a collection."""
type MessagesCollectionSegment {
  """A flattened list of the items."""
  items: [Message]

  """Information to aid in pagination."""
  pageInfo: CollectionSegmentInfo!
  totalCount: Int!
}

input JobStateFilterInput {
  and: [JobStateFilterInput!]
  or: [JobStateFilterInput!]
  jobName: StringOperationFilterInput
  cron: StringOperationFilterInput
  lastExecutionTime: DateTimeOperationFilterInput
  nextExecutionTime: DateTimeOperationFilterInput
  executionHistories: ListFilterInputTypeOfJobExecutionHistoryFilterInput
  modifiedOn: DateTimeOperationFilterInput
  id: StringOperationFilterInput
  createdOn: DateTimeOperationFilterInput
}

input JobStateSortInput {
  jobName: SortEnumType
  cron: SortEnumType
  lastExecutionTime: SortEnumType
  nextExecutionTime: SortEnumType
  modifiedOn: SortEnumType
  id: SortEnumType
  createdOn: SortEnumType
}

"""A segment of a collection."""
type JobStateCollectionSegment {
  """A flattened list of the items."""
  items: [JobState]

  """Information to aid in pagination."""
  pageInfo: CollectionSegmentInfo!
  totalCount: Int!
}

"""Represents a blob object in the storage system"""
interface IBlobObject implements IEntityBase {
  createdOn: DateTime!

  """Expiration time for the blob (if applicable)"""
  expireAt: DateTime

  """Name of the file"""
  fileName: String

  """Size of the file in bytes"""
  fileSize: Long!

  """
  The Id property for this entity type.
  注意: dbcontext会根据entity是否有id值来判断当前entity是否为新增
  """
  id: String!

  """MD5 hash of the file content"""
  md5: String

  """MIME type of the file"""
  mimeType: String

  """Storage type used for this blob"""
  storageType: BlobStorageType

  """URL to access the file"""
  url: String
}

interface ISetting implements IEntityBase {
  createdOn: DateTime!

  """
  The Id property for this entity type.
  注意: dbcontext会根据entity是否有id值来判断当前entity是否为新增
  """
  id: String!
  name: SettingDefinition!
  scope: SettingScopeEnumeration!
  scopedKey: String
  value: Any
}

input UserClaimFilterInput {
  and: [UserClaimFilterInput!]
  or: [UserClaimFilterInput!]
  claimType: StringOperationFilterInput
  claimValue: StringOperationFilterInput
}

interface IUser implements IAuthUser & IEntityBase {
  avatarFile: IBlobObject
  avatarFileId: String
  claims: [UserClaim!]!
  createdOn: DateTime!
  email: String

  """
  The Id property for this entity type.
  注意: dbcontext会根据entity是否有id值来判断当前entity是否为新增
  """
  id: String!
  isEnable: Boolean!
  loginProvider: LoginProviderEnum!
  nickname: String
  openId: String
  orgCodes: [String!]!
  orgs: [IOrg!]!
  permissions: [String!]!
  phoneNumber: String
  roleIds: [String!]!
  roleNames: [String!]!
  roles: [IRole!]!
  username: String!
}

"""
this is a aggregate root of this module, we name it the same as the module feel free to change it to its real name
"""
interface IMessage implements IEntityBase {
  content: IMessageContent!
  createdOn: DateTime!
  fromUserId: String

  """
  The Id property for this entity type.
  注意: dbcontext会根据entity是否有id值来判断当前entity是否为新增
  """
  id: String!
  messageType: MessageType!
  severity: MessageSeverityType!
  time: DateTime!
  title: String!
  toUserIds: [String!]!
}

input JobExecutionHistoryFilterInput {
  and: [JobExecutionHistoryFilterInput!]
  or: [JobExecutionHistoryFilterInput!]
  jobName: StringOperationFilterInput
  executionStartTime: DateTimeOperationFilterInput
  executionEndTime: DateTimeOperationFilterInput
  isSuccess: BooleanOperationFilterInput
  message: StringOperationFilterInput
  modifiedOn: DateTimeOperationFilterInput
  id: StringOperationFilterInput
  createdOn: DateTimeOperationFilterInput
}

"""A segment of a collection."""
type ExecutionHistoriesCollectionSegment {
  """A flattened list of the items."""
  items: [JobExecutionHistory!]

  """Information to aid in pagination."""
  pageInfo: CollectionSegmentInfo!
  totalCount: Int!
}

input StringOperationFilterInput {
  and: [StringOperationFilterInput!]
  or: [StringOperationFilterInput!]
  eq: String
  neq: String
  contains: String
  ncontains: String
  in: [String]
  nin: [String]
  startsWith: String
  nstartsWith: String
  endsWith: String
  nendsWith: String
}

input ClassEnumOperationFilterInputTypeOfBlobStorageTypeFilterInput {
  eq: BlobStorageType
  neq: BlobStorageType
  in: [BlobStorageType]
  nin: [BlobStorageType]
}

input LongOperationFilterInput {
  eq: Long
  neq: Long
  in: [Long]
  nin: [Long]
  gt: Long
  ngt: Long
  gte: Long
  ngte: Long
  lt: Long
  nlt: Long
  lte: Long
  nlte: Long
}

"""Information about the offset pagination."""
type CollectionSegmentInfo {
  """
  Indicates whether more items exist following the set defined by the clients arguments.
  """
  hasNextPage: Boolean!

  """
  Indicates whether more items exist prior the set defined by the clients arguments.
  """
  hasPreviousPage: Boolean!
}

input SettingDefinitionOperationFilterInput {
  eq: SettingDefinition
  neq: SettingDefinition
  in: [SettingDefinition]
  nin: [SettingDefinition]
}

input SettingScopeEnumerationOperationFilterInput {
  eq: SettingScopeEnumeration
  neq: SettingScopeEnumeration
  in: [SettingScopeEnumeration]
  nin: [SettingScopeEnumeration]
}

input ClassEnumOperationFilterInputTypeOfOrgTypeEnumFilterInput {
  eq: OrgTypeEnum
  neq: OrgTypeEnum
  in: [OrgTypeEnum]
  nin: [OrgTypeEnum]
}

interface IOrg implements IEntityBase {
  """所有父组织编码"""
  allParentOrgCodes: [String!]!

  """所有父组织"""
  allParentOrgs: [IOrg!]!

  """所有子组织编码"""
  allSubOrgCodes: [String!]!

  """所有子组织"""
  allSubOrgs: [IOrg!]!

  """以.作为分割线的编码"""
  code: String!
  createdOn: DateTime!

  """直系子组织编码"""
  directSubOrgCodes: [String!]!

  """直系子组织"""
  directSubOrgs: [IOrg!]!

  """
  The Id property for this entity type.
  注意: dbcontext会根据entity是否有id值来判断当前entity是否为新增
  """
  id: String!
  name: String!

  """组织类型"""
  orgType: OrgTypeEnum!

  """父组织"""
  parentOrg: IOrg!

  """父组织编码"""
  parentOrgCode: String!
}

input ListFilterInputTypeOfIUserFilterInput {
  all: IUserFilterInput
  none: IUserFilterInput
  some: IUserFilterInput
  any: Boolean
}

interface IRole implements IEntityBase {
  code: String!
  createdOn: DateTime!

  """
  The Id property for this entity type.
  注意: dbcontext会根据entity是否有id值来判断当前entity是否为新增
  """
  id: String!
  isDefault: Boolean!
  isEnabled: Boolean!
  isStatic: Boolean!
  name: String!
  permissions: [String!]!
  users: [IUser!]!
}

input BooleanOperationFilterInput {
  eq: Boolean
  neq: Boolean
}

input DateTimeOperationFilterInput {
  eq: DateTime
  neq: DateTime
  in: [DateTime]
  nin: [DateTime]
  gt: DateTime
  ngt: DateTime
  gte: DateTime
  ngte: DateTime
  lt: DateTime
  nlt: DateTime
  lte: DateTime
  nlte: DateTime
}

input ListStringOperationFilterInput {
  all: StringOperationFilterInput
  none: StringOperationFilterInput
  some: StringOperationFilterInput
  any: Boolean
}

enum SortEnumType {
  ascend
  descend
}

input MessageTypeOperationFilterInput {
  eq: MessageType
  neq: MessageType
  in: [MessageType!]
  nin: [MessageType!]
}

input IMessageContentFilterInput {
  and: [IMessageContentFilterInput!]
  or: [IMessageContentFilterInput!]
  _: StringOperationFilterInput
}

input MessageSeverityTypeOperationFilterInput {
  eq: MessageSeverityType
  neq: MessageSeverityType
  in: [MessageSeverityType!]
  nin: [MessageSeverityType!]
}

input ListFilterInputTypeOfJobExecutionHistoryFilterInput {
  all: JobExecutionHistoryFilterInput
  none: JobExecutionHistoryFilterInput
  some: JobExecutionHistoryFilterInput
  any: Boolean
}

"""
The `Long` scalar type represents non-fractional signed whole 64-bit numeric values. Long can represent values between -(2^63) and 2^63 - 1.
"""
scalar Long

"""The `DateTime` scalar represents an ISO-8601 compliant date time type."""
scalar DateTime @specifiedBy(url: "https://www.graphql-scalars.com/date-time")

input AuthenticateRequest {
  password: String!
  userIdentifier: String!
}

input FederateAuthenticateRequest {
  """OAuth Code"""
  code: String!

  """登陆提供方"""
  loginProvider: LoginProviderEnum = Local
}

type KeyValuePairOfStringAndObject {
  key: String!
}

input AuthorizeRequest {
  allowedPermissions: [AppPermission!]!
  authorizeTargetType: AuthorizeTargetType!

  """
  授权目标:
  用户or角色id
  """
  target: String!
}

input CreateBlobObjectRequest {
  file: Upload!

  """can pass null, will be calculated"""
  md5: String
  storageType: BlobStorageType!
}

input DeleteBlobObjectRequest {
  ids: [String!]!
  storageType: BlobStorageType!
}

enum MessageType {
  """
  通知, 告知某个信息的消息
  区别于单独的toast, 这个消息会留档
  """
  NOTIFICATION

  """待办, 带有链接跳转/当前状态等交互功能的消息"""
  TODO

  """用户交互消息, 通常有一个非系统的触发者"""
  INTERACT
}

input EditSettingRequest {
  name: SettingDefinition
  scope: SettingScopeEnumeration
  scopedKey: String
  value: Any
}

input GetSettingsRequest {
  _: String
  filterByName: String
  scope: SettingScopeEnumeration
  settingDefinitions: [SettingDefinition!]
}

enum MessageSeverityType {
  """Info."""
  INFO

  """Success."""
  SUCCESS

  """Warn."""
  WARN

  """Error."""
  ERROR

  """Fatal."""
  FATAL
}

input CreateOrgRequest {
  code: String!
  createUserId: String
  name: String!
  orgType: OrgTypeEnum = Default
}

input CreateRoleRequest {
  isDefault: Boolean
  isStatic: Boolean
  roleCode: String!
  roleName: String!
}

input SetRoleDefaultRequest {
  roleId: String!
}

input AssignRoleRequest {
  roles: [String!]!
  userIds: [String!]!
}

input AssignOrgRequest {
  userOrgsMap: [UserOrgMapItemInput!]!
}

type UserClaim {
  claimType: String!
  claimValue: String!
}

input EditUserRequest {
  avatarFileId: String
  claims: [UserClaimInput!] = []
  email: String
  id: String!
  isEnable: Boolean
  nickname: String!
  orgCodes: [String!]
  phoneNumber: String
  roleIds: [String!]
  username: String
}

input CreateUserRequest {
  avatarFileId: String
  claims: [UserClaimInput!]
  email: String
  isEnable: Boolean = true
  nickname: String = ""
  openId: String = ""
  orgCodes: [String!] = []
  password: String
  phoneNumber: String
  provider: LoginProviderEnum = Local
  roleIds: [String!] = []
  username: String!
}

input DeleteUserRequest {
  id: String!
}

input ResetUserPasswordRequest {
  """
  新密码
  注：此处的 Password 应是经过前端哈希处理后的密码
  """
  password: String!

  """用户ID"""
  userId: String!
}

input ChangePasswordRequest {
  """
  新密码(建议前端二次确认)
  注：此处的 Password 应是经过前端哈希处理后的密码
  """
  newPassword: String!

  """
  原密码
  注：此处的 Password 应是经过前端哈希处理后的密码
  """
  originPassword: String!
}

input RegisterUserRequest {
  email: String

  """注：此处的 Password 应是经过前端哈希处理后的密码"""
  password: String!
  phoneNumber: String
  username: String!
}

input MarkMessagesReadRequest {
  messageIds: [String!]!
  userId: String!
}

input DeleteMessageDistributionsRequest {
  messageId: String!
  userIds: [String!]!
}

input SendNotificationMessageRequest {
  messageId: String!
  toUserIds: [String!]!
}

type MessageDistribution implements IEntityBase {
  createdOn: DateTime!
  id: String!

  """
  是否已读
  bug: 未读消息最好放入redis, 避免全表遍历
  """
  isRead: Boolean!
  messageId: String!
  modifiedOn: DateTime!
  toUserId: String!
}

input CreateMessageRequest {
  meta: Any
  severity: MessageSeverityType
  text: String!
}

input EditMessageRequest {
  id: String!
  messageType: MessageType
  severity: MessageSeverityType
  text: String
}

input QueryJobStatesRequest {
  jobName: String!
}

input SendCaptchaRequest {
  captchaProvider: CaptchaProvider!
  smsCaptchaPhoneNumber: ChinesePhoneNumber
}

input ValidateCaptchaRequest {
  captchaCode: String!
  captchaKey: String!
  captchaProvider: CaptchaProvider!
}

enum CaptchaType {
  NUMBER
  ENGLISH
  NUMBER_AND_LETTER
  CHINESE
}

interface IAuthUser implements IEntityBase {
  createdOn: DateTime!
  email: String

  """
  The Id property for this entity type.
  注意: dbcontext会根据entity是否有id值来判断当前entity是否为新增
  """
  id: String!
  isEnable: Boolean!
  loginProvider: LoginProviderEnum!
  nickname: String
  openId: String
  phoneNumber: String
  username: String!
}

input UserClaimInput {
  claimType: String!
  claimValue: String!
}

input UserOrgMapItemInput {
  orgCodes: [String!]!
  userId: String!
}